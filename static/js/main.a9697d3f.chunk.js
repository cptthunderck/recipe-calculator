(this["webpackJsonprecipe-calculator"]=this["webpackJsonprecipe-calculator"]||[]).push([[0],{13:function(e,t,n){},15:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n.n(c),u=n(7),r=n.n(u),i=(n(13),n(4)),o=n(1),s=n(6),l=n.n(s),j=n(8),b=n(3),O=(n(15),n(0));var m=function(){console.log("App()");var e=function(){var e=null,t=document.location.hash.substr(1),n=decodeURIComponent(t);try{e=JSON.parse(n)}catch(c){console.error(c)}return null===e&&(e={tinyurl:t,uid:0,volume:0,volumeUnits:"mL",massUnits:"g",liquids:{},solids:{}}),console.log(e),e}(),t=Object(c.useRef)(null),n=Object(c.useRef)(null),a=Object(c.useState)(e.volume),u=Object(b.a)(a,2),r=u[0],s=u[1],m=Object(c.useState)(e.volumeUnits),d=Object(b.a)(m,2),h=d[0],f=d[1],x=Object(c.useState)(e.massUnits),p=Object(b.a)(x,2),v=p[0],g=p[1],y=Object(c.useState)(e.uid),C=Object(b.a)(y,2),N=C[0],F=C[1],U=Object(c.useState)(e.liquids),S=Object(b.a)(U,2),A=S[0],V=S[1],_=Object(c.useState)(e.solids),k=Object(b.a)(_,2),R=k[0],w=k[1],q=Object(c.useState)({}),E=Object(b.a)(q,2),L=E[0],P=E[1],I=Object(c.useState)(e.tinyurl),J=Object(b.a)(I,1)[0];document.location.hash=encodeURIComponent(JSON.stringify({tinyurl:J,uid:N,volume:r,volumeUnits:h,massUnits:v,liquids:A,solids:R})),Object(c.useEffect)((function(){var e=new AbortController;function t(){return(t=Object(j.a)(l.a.mark((function t(){var n,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://tinyurl.com/".concat(J),{signal:e.signal});case 2:return n=t.sent,t.next=5,n.json();case 5:c=t.sent,P((function(e){return c}));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return 0===Object.keys(L).length&&function(){return t.apply(this,arguments)}().catch((function(e){console.error(e)})),function(){e.abort()}}));var T=function(e,t){w((function(n){return Object(o.a)(Object(o.a)({},n),{},Object(i.a)({},e,Object(o.a)(Object(o.a)({},n[e]),{},{name:t})))}))},B=function(e,t){w((function(n){return Object(o.a)(Object(o.a)({},n),{},Object(i.a)({},e,Object(o.a)(Object(o.a)({},n[e]),{},{displacement:t})))}))},D=Object.entries(A).map((function(e){var t=Object(b.a)(e,2),n=t[0],c=t[1];return Object(O.jsxs)("li",{children:[Object(O.jsx)("button",{onClick:function(){return function(e){delete A[e],V(Object(o.a)({},A))}(n)},children:"Remove"}),Object(O.jsx)("br",{}),Object(O.jsx)("label",{htmlFor:"name_".concat(n),children:"Name"}),Object(O.jsx)("br",{}),Object(O.jsx)("input",{onChange:function(e){return function(e,t){V(Object(o.a)(Object(o.a)({},A),{},Object(i.a)({},e,Object(o.a)(Object(o.a)({},A[e]),{},{name:t}))))}(n,e.target.value)},defaultValue:c.name,id:"name_".concat(n),type:"text"}),Object(O.jsx)("br",{}),Object(O.jsx)("label",{htmlFor:"amount_".concat(n),children:"Volume (%)"}),Object(O.jsx)("br",{}),Object(O.jsx)("input",{onChange:function(e){return function(e,t){V(Object(o.a)(Object(o.a)({},A),{},Object(i.a)({},e,Object(o.a)(Object(o.a)({},A[e]),{},{amount:t}))))}(n,e.target.valueAsNumber)},defaultValue:c.amount||"",id:"amount_".concat(n),type:"number"}),Object(O.jsx)("br",{})]},n)})),M=Object.entries(L).map((function(e){var t=Object(b.a)(e,2),n=t[0];t[1];return Object(O.jsx)("option",{value:n,children:n},n)})),z=Object.entries(R).map((function(e){var c=Object(b.a)(e,2),a=c[0],u=c[1];return Object(O.jsxs)("li",{children:[Object(O.jsx)("button",{onClick:function(){return function(e){delete R[e],w(Object(o.a)({},R))}(a)},children:"Remove"}),Object(O.jsx)("br",{}),Object(O.jsx)("label",{htmlFor:"name_".concat(a),children:"Name"}),Object(O.jsx)("br",{}),Object(O.jsxs)("span",{style:{display:null!==Object.keys(L).length?"default":"none"},children:[Object(O.jsx)("select",{onChange:function(e){return function(e,c){t.current.value=c,n.current.valueAsNumber=L[c],T(e,c),B(e,L[c])}(a,e.target.value)},value:u.name,children:M}),Object(O.jsx)("br",{})]}),Object(O.jsx)("input",{onChange:function(e){return T(a,e.target.value)},value:u.name,id:"name_".concat(a),type:"text",ref:t}),Object(O.jsx)("br",{}),Object(O.jsxs)("label",{htmlFor:"displacement_".concat(a),children:["Displacement (",h,"/",v,")"]}),Object(O.jsx)("br",{}),Object(O.jsx)("input",{onChange:function(e){return B(a,e.target.valueAsNumber)},defaultValue:u.displacement||"",id:"displacement_".concat(a),type:"number",ref:n}),Object(O.jsx)("br",{}),Object(O.jsxs)("label",{htmlFor:"amount_".concat(a),children:["Concentration (",v,"/",h,")"]}),Object(O.jsx)("br",{}),Object(O.jsx)("input",{onChange:function(e){return function(e,t){w(Object(o.a)(Object(o.a)({},R),{},Object(i.a)({},e,Object(o.a)(Object(o.a)({},R[e]),{},{amount:t}))))}(a,e.target.valueAsNumber)},defaultValue:u.amount||"",id:"amount_".concat(a),type:"number"}),Object(O.jsx)("br",{})]},a)}));return Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)("h1",{children:"Recipe Calculator"}),Object(O.jsx)("label",{htmlFor:"volumeUnits",children:"Volume Units"}),Object(O.jsx)("br",{}),Object(O.jsx)("input",{onChange:function(e){return f(e.target.value)},defaultValue:h,id:"volumeUnits",type:"text"}),Object(O.jsx)("br",{}),Object(O.jsx)("label",{htmlFor:"massUnits",children:"Mass Units"}),Object(O.jsx)("br",{}),Object(O.jsx)("input",{onChange:function(e){return g(e.target.value)},defaultValue:v,id:"massUnits",type:"text"}),Object(O.jsx)("br",{}),Object(O.jsxs)("label",{htmlFor:"total",children:["Total Volume (",h,")"]}),Object(O.jsx)("br",{}),Object(O.jsx)("input",{onChange:function(e){return s(e.target.valueAsNumber)},defaultValue:r||"",id:"total",type:"number"}),Object(O.jsx)("br",{}),Object(O.jsx)("h2",{children:"Liquids"}),Object(O.jsx)("h3",{children:"Liquids without amount specified will be used to fill remainder of total volume"}),Object(O.jsx)("button",{onClick:function(){F(N+1),A[N]={name:"",amount:NaN},V(A)},children:"Add"}),Object(O.jsx)("ul",{children:D}),Object(O.jsx)("h2",{children:"Solids"}),Object(O.jsx)("button",{onClick:function(){F(N+1),R[N]={name:"",displacement:NaN,amount:NaN},w(R)},children:"Add"}),Object(O.jsx)("ul",{children:z}),Object(O.jsx)("h2",{children:"Recipe"}),Object(O.jsx)("ul",{children:function(){var e=[],t=Object.values(A),n=Object.values(R);if(!Number.isFinite(r)||0===t.length||0===n.length)return e;var c=t.filter((function(e){return!Number.isFinite(e.amount)})),a=t.filter((function(e){return Number.isFinite(e.amount)})),u=n.map((function(e){return e.amount*r*e.displacement})).reduce((function(e,t){return e+t}),0),i=a.map((function(e){return e.amount/100*r})).reduce((function(e,t){return e+t}),0),o=r-(u+i),s=0;return c.forEach((function(t){return e.push(Object(O.jsxs)("li",{children:[t.name,": ",(o/c.length).toPrecision(4)," ",h]},s++))})),a.forEach((function(t){return e.push(Object(O.jsxs)("li",{children:[t.name,": ",(r*(t.amount/100)).toPrecision(4)," ",h]},s++))})),n.forEach((function(t){return e.push(Object(O.jsxs)("li",{children:[t.name,": ",(r*t.amount).toPrecision(4)," ",v]},s++))})),e}()})]})},d=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,u=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),u(e),r(e)}))};r.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(m,{})}),document.getElementById("root")),d()}},[[17,1,2]]]);
//# sourceMappingURL=main.a9697d3f.chunk.js.map